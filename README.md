# Meteomix

Одностраничное приложение для сравнения погодных прогнозов из нескольких источников. Вводите город — приложение подсказывает варианты, определяет координаты и запрашивает прогноз сразу у нескольких провайдеров, приводя данные к единому формату для наглядного сравнения.

## Что делает приложение
- Автодополнение городов и геокодирование координат.
- Получение прогноза из нескольких API и унификация метрик (температура, погодный код, ветер и т.д.).
- Единая таблица прогноза по дням для разных источников (состояние, температура, ветер).
- Нейтральные текстовые описания погодных кодов и иконография.

## Стек
- Ядро: React 19, TypeScript, Vite.
- UI: Mantine UI, @tabler/icons-react, CSS Modules.
- Состояние и данные: Redux Toolkit + RTK Query.
- Архитектура: Feature-Sliced Design (fsd) с линтерами steiger/fsd-crawler.
- Качество кода: ESLint, Prettier, Stylelint, Husky (pre-commit hooks).

## Источники данных
- Open‑Meteo
- MET Norway (met.no)
- Visual Crossing (через серверный эндпоинт /api/visualcrossing)
- Яндекс Подсказки и Геокодер — для автодополнения и получения координат

## Переменные окружения
Клиент (Vite):
- VITE_YANDEX_SUGGEST_KEY_DEV / VITE_YANDEX_SUGGEST_KEY_PROD
- VITE_YANDEX_GEOCODER_KEY_DEV / VITE_YANDEX_GEOCODER_KEY_PROD

Серверные функции (Vercel):
- VISUALCROSSING_API_KEY — ключ для Visual Crossing. Хранится только на сервере.

Примеры и рекомендации:
- Локально создайте .env.local в корне проекта:
  - VISUALCROSSING_API_KEY=...
  - (Клиентские VITE_* для Яндекс — по необходимости)
- В прод/превью окружениях установите VISUALCROSSING_API_KEY в настройках проекта на Vercel (Project → Settings → Environment Variables).

## Серверные эндпоинты
- GET /api/visualcrossing
  - Параметры: location (lat,lon), unitGroup=metric, include=days, lang=ru, days=N (опционально)
  - Ключ берётся из process.env.VISUALCROSSING_API_KEY

## Фичи
- Поиск города с подсказками.
- Консолидация прогнозов из 3 провайдеров в единую таблицу.
- Единый нормализованный формат данных (температура, погодные коды, ветер).
- Лоадеры и скелетоны при загрузке.
- Адаптивная верстка.
- Конфигурируемое число дней прогноза (см. shared/config/forecast.ts).

## Скрипты
- dev — Vite dev server (только фронтенд; запросы к /api не работают)
- build — типизация + прод сборка
- preview — предпросмотр прод сборки
- lint — запуск ESLint, Stylelint и проверок FSD
- lint:fix — автоисправление проблем линтеров
- vercel:dev — локальный сервер Vercel (фронтенд + /api/*). Использовать для полной функциональности.

## Локальный запуск
Вариант A (полный стек, рекомендовано):
1) Установите зависимости: npm i
2) Создайте .env.local и заполните:
   - VISUALCROSSING_API_KEY=...
   - (при необходимости VITE_YANDEX_* для клиента)
3) Запустите локальный сервер Vercel: npm run vercel:dev
4) Откройте ссылку из консоли (обычно http://localhost:3000). Эндпоинты /api/* будут доступны.

Вариант B (только фронтенд):
1) npm i
2) npm run dev
3) Откройте http://localhost:5173 — учтите, что запросы к /api не будут работать без прокси. Используйте Вариант A.

## Прод
Приложение развёрнуто и доступно по адресу:
https://meteomix.vercel.app/

На Vercel настройте в проекте переменные окружения:
- VISUALCROSSING_API_KEY

## Структура проекта (сокращённо)
- src/app — инициализация приложения
- src/pages — страницы (Home)
- src/entities/forecast — работа с погодными API и нормализация
- src/shared — общие конфиги и компоненты
- api — серверные функции Vercel

## Лицензия
MIT
